var Cac;!function(t){var n=function(){function t(){this.useFullWidth=!1,this.address=new r,this.contact=new s,this.addressBookDetails=new f}return t}();t.WidgetOptions=n;var i=function(){function t(t,n,i,r,e){this.id=t,this.displayText=n,this.type=i,this.fieldName=r,this.fieldError=e}return t}();t.FormError=i;var r=function(){function t(){this.state=new u,this.country=new e,this.classification=new o}return t}();t.Address=r;var e=function(){function t(){}return t}();t.Country=e;var u=function(){function t(){}return t}();t.State=u;var s=function(){function t(){this.phoneType=new o}return t}();t.Contact=s;var o=function(){function t(){}return t}();t.KeyValue=o;var a=function(){function t(){}return t}();t.ContactListItem=a;var c=function(){function t(){}return t}();t.DisplayText=c;var f=function(){function t(){this.saveAddress=!1,this.updateAddress=!1,this.updateDefaultAddress=!1}return t}();t.AddressBookDetails=f;var d=function(){function t(){}return t}();t.DefaultRequiredFlags=d}(Cac||(Cac={}));
var Cac;!function(t){var n;!function(t){var n=function(){function t(){}return t.prototype.updateCityState=function(){},t.prototype.populateFormWithContact=function(){},t}();t.Utility=n}(n=t.Services||(t.Services={}))}(Cac||(Cac={}));
var Cac;!function(t){var e;!function(t){var e="cac/cacws/cacService",s="/getCountryValues",i="/getCountryValues",a="/getCountryValues",r="/getLabelsandLayout",n="/getLabelsandLayout",o="/getAddressDetails",l="/getStreetLevelValidation",c="/validateRegional",u="/getCityValues",d="/getCACInitValue",y="/getClassification",p=function(){function t(t){this.$http=t}return t.prototype.init=function(t){this.cacwsBaseUri=null!=t?t:"/"},t.prototype.getInitData=function(t,s,i){var a=this.cacwsBaseUri+e+d;return this.$http.post(a,JSON.stringify({OrigOrDest:"origin"===t||"destination"===t?t.substring(0,4):null,userId:s,locale:i}))},t.prototype.getDisplayText=function(t){var i=this.cacwsBaseUri+e+s;return this.$http.post(i,JSON.stringify({locale:t}))},t.prototype.getCountries=function(t){var s=this.cacwsBaseUri+e+a;return this.$http.post(s,JSON.stringify({locale:t}))},t.prototype.getStates=function(t,s){var i=this.cacwsBaseUri+e+r;return this.$http.post(i,JSON.stringify({locale:t,selectedCountry:s}))},t.prototype.getContactList=function(t,s){var a=this.cacwsBaseUri+e+i;return this.$http.post(a,JSON.stringify({OrigOrDest:"origin"===t||"destination"===t?t.substring(0,4):null,userId:s}))},t.prototype.getContact=function(t,s,i){var a=this.cacwsBaseUri+e+o;return this.$http.post(a,JSON.stringify({locale:t,userId:s,selectedAddress:i}))},t.prototype.validateAddress=function(t,s){var i=this.cacwsBaseUri+e+l;return this.$http.post(i,JSON.stringify({name:s,addLine1:t.address1,addLine2:void 0===t.address2?null:t.address2,addLine3:void 0===t.address3?null:t.address3,selectedCountry:t.country.key,state:null==t.state||null==t.state.key?null:t.state.key,postalCode:void 0===t.postal?null:t.postal,city:void 0===t.city?null:t.city}))},t.prototype.getCities=function(t,s,i){var a=this.cacwsBaseUri+e+u;return this.$http.post(a,JSON.stringify({cityKeyValue:t,locale:s,selectedCountry:i,stateOrCity:"CityValue"}))},t.prototype.getUpdatedCityState=function(t,s){var i=this.cacwsBaseUri+e+c;return this.$http.post(i,JSON.stringify({selectedCountry:t,postalCode:s}))},t.prototype.validateRegional=function(t){var s=this.cacwsBaseUri+e+c;return this.$http.post(s,JSON.stringify({selectedCountry:t.country.key,postalCode:t.postal,city:t.city,state:null==t.state||null==t.state.key?"":"IE"===t.country.key&&t.state.value?t.state.value:t.state.key}))},t.prototype.getCountrySpecificData=function(t,s){var i=this.cacwsBaseUri+e+n;return this.$http.post(i,JSON.stringify({locale:t,selectedCountry:s}))},t.prototype.getClassification=function(t){var s=this.cacwsBaseUri+e+y;return this.$http.post(s,JSON.stringify({addLine1:t.address1,addLine2:void 0===t.address2?null:t.address2,addLine3:void 0===t.address3?null:t.address3,selectedCountry:t.country.key,state:null==t.state||null==t.state.key?null:t.state.key,postalCode:void 0===t.postal?null:t.postal,city:void 0===t.city?null:t.city}))},t.$inject=["$http"],t}();t.Http=p}(e=t.Services||(t.Services={}))}(Cac||(Cac={}));
var Cac;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.getRequiredFlags=function(){return{cityRequired:this.cityRequiredFlag,stateRequired:this.stateRequiredFlag,postalRequired:this.postalRequiredFlag}},e.prototype.setCityStatePostalRequiredFlags=function(e){null!=e&&(this.cityRequiredFlag=e.city,this.stateRequiredFlag=e.state,this.postalRequiredFlag=e.postal)},e.prototype.contactListRequired=function(){return!1},e.prototype.countryRequired=function(){return!0},e.prototype.nameRequired=function(){return!0},e.prototype.contactNameRequired=function(){return!1},e.prototype.address1Required=function(){return!0},e.prototype.address2Required=function(){return!1},e.prototype.address3Required=function(){return!1},e.prototype.cityRequired=function(){return this.cityRequiredFlag},e.prototype.stateRequired=function(){return this.stateRequiredFlag},e.prototype.postalRequired=function(){return this.postalRequiredFlag},e.prototype.emailRequired=function(){return!1},e.prototype.phoneRequired=function(){return!1},e.prototype.extensionRequired=function(){return!1},e.prototype.nicknameRequired=function(){return!1},e.prototype.topNicknameRequired=function(){return!1},e.prototype.locationIdRequired=function(){return!1},e.prototype.faxRequired=function(){return!1},e.prototype.phoneTypeRequired=function(){return!1},e}();e.Required=t}(t=e.Services||(e.Services={}))}(Cac||(Cac={}));
var Cac;!function(t){var n;!function(t){var n=function(){function t(){var t=this;this.showContactList=function(t){return null!=t&&0!==t.length},this.showCountry=function(){return!0},this.showName=function(){return!0},this.showContactName=function(){return!0},this.showAddress1=function(){return!0},this.showAddress2=function(){return!0},this.showAddress3=function(){return!0},this.showCity=function(){return t.cityShowFlag},this.showState=function(){return t.stateShowFlag},this.showPostal=function(){return t.postalShowFlag},this.showEmail=function(){return!0},this.showPhone=function(){return!0},this.showExtension=function(){return!0},this.showSaveEntry=function(){return!0},this.showUpdateEntry=function(){return!0},this.showUseAsDefault=function(){return!0},this.showNickname=function(){return!0},this.showTopNickname=function(){return!0},this.showLocationId=function(){return!0},this.showFax=function(){return!0},this.showPhoneType=function(){return!0},this.showIsResidential=function(){return!0},this.showEmailNotify=function(){return!0},this.showEmailNotifyMsg=function(){return!1}}return t.prototype.setCityStatePostalShowFlags=function(t){null!=t&&(this.cityShowFlag=t.city,this.stateShowFlag=t.state,this.postalShowFlag=t.postal)},t}();t.Show=n}(n=t.Services||(t.Services={}))}(Cac||(Cac={}));
var Cac;!function(n){var t;!function(n){var t=function(){function n(){this.onContactListBlur=function(){},this.onCountryBlur=function(){},this.onNameBlur=function(){},this.onContactNameBlur=function(){},this.onAddress1Blur=function(){},this.onAddress2Blur=function(){},this.onAddress3Blur=function(){},this.onCityBlur=function(){},this.onStateBlur=function(){},this.onPostalBlur=function(){},this.onEmailBlur=function(){},this.onPhoneBlur=function(){},this.onExtensionBlur=function(){},this.onSaveEntryBlur=function(){},this.onUpdateEntryBlur=function(){},this.onUseAsDefaultBlur=function(){},this.onNicknameBlur=function(){},this.onLocationIdBlur=function(){},this.onFaxBlur=function(){},this.onPhoneTypeBlur=function(){},this.onIsResidentialBlur=function(){},this.onEmailNotifyBlur=function(){}}return n}();n.Blur=t}(t=n.Services||(n.Services={}))}(Cac||(Cac={}));
var Cac;!function(t){var n;!function(t){var n=function(){function t(){}return t.prototype.nameMaxLength=function(){return 35},t.prototype.contactNameMaxLength=function(){return 35},t.prototype.address1MaxLength=function(){return 35},t.prototype.address2MaxLength=function(){return 35},t.prototype.address3MaxLength=function(){return 35},t.prototype.cityMaxLength=function(){return 30},t.prototype.stateMaxLength=function(){return 35},t.prototype.postalMaxLength=function(){return 10},t.prototype.emailMaxLength=function(){return 50},t.prototype.phoneMaxLength=function(){return 15},t.prototype.extensionMaxLength=function(){return 5},t.prototype.nicknameMaxLength=function(){return 35},t.prototype.topNicknameMaxLength=function(){return 35},t.prototype.locationIdMaxLength=function(){return 15},t.prototype.faxMaxLength=function(){return 15},t}();t.MaxLength=n}(n=t.Services||(t.Services={}))}(Cac||(Cac={}));
var Cac;!function(n){var t;!function(n){var t=function(){function n(){}return n.prototype.nameMinLength=function(){return null},n.prototype.contactNameMinLength=function(){return null},n.prototype.address1MinLength=function(){return null},n.prototype.address2MinLength=function(){return null},n.prototype.address3MinLength=function(){return null},n.prototype.cityMinLength=function(){return null},n.prototype.stateMinLength=function(){return null},n.prototype.postalMinLength=function(){return null},n.prototype.emailMinLength=function(){return null},n.prototype.phoneMinLength=function(){return null},n.prototype.extensionMinLength=function(){return null},n.prototype.nicknameMinLength=function(){return null},n.prototype.topNicknameMinLength=function(){return null},n.prototype.locationIdMinLength=function(){return null},n.prototype.faxMinLength=function(){return null},n}();n.MinLength=t}(t=n.Services||(n.Services={}))}(Cac||(Cac={}));
var Cac;!function(n){var t;!function(n){var t=function(){function n(){this.contactListDisabled=function(){return!1},this.countryDisabled=function(){return!1},this.nameDisabled=function(){return!1},this.contactNameDisabled=function(){return!1},this.address1Disabled=function(){return!1},this.address2Disabled=function(){return!1},this.address3Disabled=function(){return!1},this.cityDisabled=function(){return!1},this.stateDisabled=function(){return!1},this.postalDisabled=function(){return!1},this.emailDisabled=function(){return!1},this.phoneDisabled=function(){return!1},this.extensionDisabled=function(){return!1},this.saveEntryDisabled=function(){return!1},this.updateEntryDisabled=function(){return!1},this.useAsDefaultDisabled=function(){return!1},this.nicknameDisabled=function(){return!1},this.locationIdDisabled=function(){return!1},this.faxDisabled=function(){return!1},this.phoneTypeDisabled=function(){return!1},this.isResidentialDisabled=function(){return!1},this.emailNotifyDisabled=function(){return!1}}return n}();n.Disabled=t}(t=n.Services||(n.Services={}))}(Cac||(Cac={}));
var Cac;!function(n){var t;!function(n){var t=function(){function n(){this.onAddress1Change=function(){},this.onContactListChange=function(){},this.onCountryChange=function(){},this.onNameChange=function(){},this.onContactNameChange=function(){},this.onAddress2Change=function(){},this.onAddress3Change=function(){},this.onCityChange=function(){},this.onStateChange=function(){},this.onPostalChange=function(){},this.onEmailChange=function(){},this.onPhoneChange=function(){},this.onExtensionChange=function(){},this.onSaveEntryChange=function(){},this.onUpdateEntryChange=function(){},this.onUseAsDefaultChange=function(){},this.onNicknameChange=function(){},this.onLocationIdChange=function(){},this.onFaxChange=function(){},this.onPhoneTypeChange=function(){},this.onIsResidentialChange=function(){},this.onEmailNotifyChange=function(){},this.onSelectSuggestedAddress=function(){}}return n}();n.Change=t}(t=n.Services||(n.Services={}))}(Cac||(Cac={}));
var Cac;!function(t){var e;!function(t){var e="^[a-zA-Z0-9- ]+$",r="^[a-zA-Z0-9- '.*?/\n/,\\\\()~:#\\[\\]\"+$=!~@&_/-ÿ]+$",o="^[0-9]+$",n="^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$",a="^[0-9+()/\\-. ]+$",i="^[a-zA-Z0-9- '.*?/\n/,\\\\()~:#\\[\\]\"+$=!~@&_/-ÿĀ-ſ]+$",c="^[a-zA-Z0-9- '.*?/\n/,\\\\()~:#\\[\\]\"+$=!~@&_/-ÿЀ-ӿ]+$",l=function(){function t(){this.allowCyrillic=!1}return t.prototype.setLocale=function(t){this.locale=t},t.prototype.setAllowCyrillic=function(t){this.allowCyrillic=t},t.prototype.namePattern=function(){return this.getFreeFormFromLocale()},t.prototype.contactNamePattern=function(){return this.getFreeFormFromLocale()},t.prototype.address1Pattern=function(){return this.getFreeFormFromLocale()},t.prototype.address2Pattern=function(){return this.getFreeFormFromLocale()},t.prototype.address3Pattern=function(){return this.getFreeFormFromLocale()},t.prototype.cityPattern=function(){return this.getFreeFormFromLocale()},t.prototype.statePattern=function(){return this.getFreeFormFromLocale()},t.prototype.postalPattern=function(){return e},t.prototype.emailPattern=function(){return n},t.prototype.phonePattern=function(){return a},t.prototype.extensionPattern=function(){return o},t.prototype.nicknamePattern=function(){return this.getFreeFormFromLocale()},t.prototype.locationIdPattern=function(){return this.getFreeFormFromLocale()},t.prototype.faxPattern=function(){return a},t.prototype.getFreeFormFromLocale=function(){return this.localeIsCyrillic()&&this.allowCyrillic?c:this.localeIsLatin2()?i:r},t.prototype.localeIsLatin2=function(){var t=["PL_PL","HU_HU","TR_TR","EN_CZ","CS_CZ"];return t.indexOf(this.locale.toUpperCase())!==-1},t.prototype.localeIsCyrillic=function(){var t=["RU_RU"];return t.indexOf(this.locale.toUpperCase())!==-1},t}();t.Pattern=l}(e=t.Services||(t.Services={}))}(Cac||(Cac={}));
var Cac;!function(t){var n;!function(t){var n=function(){function t(){this.restrict="A",this.require="ngModel",this.link=function(t,n,r,a){a.$validators.cacPostalMaxLength=function(t){var n=r.cacPostalMaxLengthVal;if(t){var a=t.replace(/[ -]/g,"");return!(t.length>35)&&a.length<=+n}return!0},a.$validators.cacPostalMinLength=function(t){var n=r.cacPostalMinLengthVal;if(t){var a=t.replace(/[ -]/g,"");return a.length>=+n}return!0}}}return t.factory=function(){var n=function(){return new t};return n},t}();t.PostalLengthDirective=n}(n=t.Directives||(t.Directives={}))}(Cac||(Cac={}));
var Cac;!function(e){var t=function(){function t(t,s,a,n){var i=this;this.$scope=t,this.http=s,this.$q=a,this.$timeout=n,this.required=new e.Services.Required,this.show=new e.Services.Show,this.blur=new e.Services.Blur,this.change=new e.Services.Change,this.pattern=new e.Services.Pattern,this.disabled=new e.Services.Disabled,this.maxLength=new e.Services.MaxLength,this.minLength=new e.Services.MinLength,this.emailNotify=!1,this.validateForm=!0,this.apiObject={},this.validateIntl=!0,this.streetLevelSuggestions=!0,this.supportContactList=!1,this.postalFirstCountries=[],this.allowCyrillic=!1,this.showSaveEntry=function(){return!0},this.showUpdateEntry=function(){return null!=i.addressBookDetails.keyValue&&null!=i.addressBookDetails.keyValue.key},this.showUseAsDefault=function(){return null!=i.contacts&&0!==i.contacts.length},this.showNickname=function(){return i.show.showSaveEntry()&&i.addressBookDetails.saveAddress},this.setInternalServices(),this.registerExternalApis(t)}return t.prototype.init=function(t){var s=this;try{if(null==t)throw Error("Widget Options must be set.");null!=t.allowCyrillic&&(this.allowCyrillic=t.allowCyrillic,this.pattern.setAllowCyrillic(this.allowCyrillic)),this.loadTemplate(t.templateString),null!=t.address?(this.address=angular.copy(t.address),null!=t.address.classification&&"2"===t.address.classification.key&&(this.isResidential=!0)):this.address=new e.Address,null!=t.contact?this.contact=angular.copy(t.contact):this.contact=new e.Contact,null!=t.emailNotify&&(this.emailNotify=t.emailNotify),null!=t.supportContactList&&(this.supportContactList=t.supportContactList),null!=t.addressBookDetails?(this.addressBookDetails=angular.copy(t.addressBookDetails),this.addressBookDetails.keyValue&&!this.addressBookDetails.keyValue.key&&(this.addressBookDetails.keyValue=null)):this.addressBookDetails=new e.AddressBookDetails,this.useFullWidth=t.useFullWidth,null!=t.validateForm&&(this.validateForm=t.validateForm),this.locale=t.locale,this.pattern.setLocale(this.locale),this.userID=t.userID,this.addressType=t.addressType,this.cacwsBaseUri=t.cacwsBaseUri,this.idPrefix=t.idPrefix,null!=t.streetLevelSuggestions&&(this.streetLevelSuggestions=t.streetLevelSuggestions),null!=t.validateIntl&&(this.validateIntl=t.validateIntl),t.postalFirstCountries&&(this.postalFirstCountries=t.postalFirstCountries),this.http.init(this.cacwsBaseUri),this.initMethods(t),null!=this.address.country&&null!=this.address.country.key||(this.address.country={key:this.locale.substring(3),value:null}),this.http.getInitData(this.addressType,this.userID,this.locale).then(function(e){var a=JSON.parse(e.data.labelList);if(s.displayText=s.updateDisplayText(a),null!=a.phoneType&&""!==a.phoneType&&(s.phoneTypes=JSON.parse(a.phoneType),null!=s.contact.phoneType&&null!=s.contact.phoneType.key||(s.contact.phoneType=s.phoneTypes[s.phoneTypes.map(function(e){return e.key}).indexOf("04")])),s.countries=s.getCountries(t,e.data.countries),s.updateCountrySpecificData(!0),null==t.contacts||t.appendContacts?null!=e.data.addressBookList&&""!==e.data.addressBookList?(s.contacts=JSON.parse(e.data.addressBookList),t.appendContacts&&null!=s.contacts&&(s.contacts=t.contacts.concat(s.contacts))):s.contacts=null:s.contacts=t.contacts,s.contacts&&s.addressBookDetails.saveAddress&&s.addressBookDetails.keyValue&&s.addressBookDetails.keyValue.key&&s.addressBookDetails.keyValue.value){var n=s.getContactFromListIndex();if(n!==-1){var i=s.contacts[n];i.value!==s.addressBookDetails.keyValue.value&&(s.addressBookDetails.newNickName=s.addressBookDetails.keyValue.value)}}},function(e){})}catch(e){}},t.prototype.initNewAddressAndContact=function(t,s){var a=this,n=this.address.country;t?this.address=angular.copy(t):(this.address=new e.Address,this.address.country=n),s?this.contact=angular.copy(s):this.contact=new e.Contact,this.clearSuggestedAddresses(),this.address.country.key!=n.key?this.onCountryChange(!0).then(function(){t.state&&t.state.key&&a.updateState(t.state.key)}):t.state&&t.state.key&&this.updateState(t.state.key)},t.prototype.registerExternalApis=function(e){var t=this;this.apiObject.init=function(e){return t.init(e)},this.apiObject.initNewAddressAndContact=function(e,s){return t.initNewAddressAndContact(e,s)},this.apiObject.destroy=function(){return t.destroy()},this.apiObject.validateAddress=function(){return t.validateAddress()},this.apiObject.getData=function(){return t.getData()},this.apiObject.getSuggestedAddressList=function(){return t.getSuggestedAddressList()},this.apiObject.formValid=function(){return t.formValid()},this.apiObject.isFormValid=function(){return t.isFormValid()},this.apiObject.getFormErrors=function(){return t.getFormErrors()},this.apiObject.updateCountrySpecificData=function(){return t.updateCountrySpecificData()},this.apiObject.getForm=function(){return t.getForm()},this.apiObject.getDefaultRequiredFlags=function(){return t.required.getRequiredFlags()},this.registerSetters()},t.prototype.initMethods=function(e){this.initRequired(e),this.initBlur(e),this.initChange(e),this.initShow(e),this.initPattern(e),this.initDisabled(e),this.initMaxLength(e),this.initMinLength(e)},t.prototype.initMinLength=function(e){null!=e.nameMinLength&&(this.minLength.nameMinLength=e.nameMinLength),null!=e.contactNameMinLength&&(this.minLength.contactNameMinLength=e.contactNameMinLength),null!=e.address1MinLength&&(this.minLength.address1MinLength=e.address1MinLength),null!=e.address2MinLength&&(this.minLength.address2MinLength=e.address2MinLength),null!=e.address3MinLength&&(this.minLength.address3MinLength=e.address3MinLength),null!=e.cityMinLength&&(this.minLength.cityMinLength=e.cityMinLength),null!=e.stateMinLength&&(this.minLength.stateMinLength=e.stateMinLength),null!=e.postalMinLength&&(this.minLength.postalMinLength=e.postalMinLength),null!=e.emailMinLength&&(this.minLength.emailMinLength=e.emailMinLength),null!=e.phoneMinLength&&(this.minLength.phoneMinLength=e.phoneMinLength),null!=e.extensionMinLength&&(this.minLength.extensionMinLength=e.extensionMinLength),null!=e.nicknameMinLength&&(this.minLength.nicknameMinLength=e.nicknameMinLength),null!=e.locationIdMinLength&&(this.minLength.locationIdMinLength=e.locationIdMinLength),null!=e.faxMinLength&&(this.minLength.faxMinLength=e.faxMinLength)},t.prototype.initShow=function(e){null!=e.showContactList&&(this.show.showContactList=e.showContactList),null!=e.showCountry&&(this.show.showCountry=e.showCountry),null!=e.showName&&(this.show.showName=e.showName),null!=e.showContactName&&(this.show.showContactName=e.showContactName),null!=e.showAddress1&&(this.show.showAddress1=e.showAddress1),null!=e.showAddress2&&(this.show.showAddress2=e.showAddress2),null!=e.showAddress3&&(this.show.showAddress3=e.showAddress3),null!=e.showCity&&(this.show.showCity=e.showCity),null!=e.showState&&(this.show.showState=e.showState),null!=e.showPostal&&(this.show.showPostal=e.showPostal),null!=e.showEmail&&(this.show.showEmail=e.showEmail),null!=e.showPhone&&(this.show.showPhone=e.showPhone),null!=e.showExtension&&(this.show.showExtension=e.showExtension),null!=e.showUpdateEntry&&(this.show.showUpdateEntry=e.showUpdateEntry),null!=e.showSaveEntry&&(this.show.showSaveEntry=e.showSaveEntry),null!=e.showNickname&&(this.show.showNickname=e.showNickname),null!=e.showLocationId&&(this.show.showLocationId=e.showLocationId),null!=e.showTopNickname&&(this.show.showTopNickname=e.showTopNickname),null!=e.showFax&&(this.show.showFax=e.showFax),null!=e.showPhoneType&&(this.show.showPhoneType=e.showPhoneType),null!=e.showUseAsDefault&&(this.show.showUseAsDefault=e.showUseAsDefault),null!=e.showIsResidential&&(this.show.showIsResidential=e.showIsResidential),null!=e.showEmailNotify&&(this.show.showEmailNotify=e.showEmailNotify),null!=e.showEmailNotifyMsg&&(this.show.showEmailNotifyMsg=e.showEmailNotifyMsg)},t.prototype.initDisabled=function(e){null!=e.contactListDisabled&&(this.disabled.contactListDisabled=e.contactListDisabled),null!=e.countryDisabled&&(this.disabled.countryDisabled=e.countryDisabled),null!=e.nameDisabled&&(this.disabled.nameDisabled=e.nameDisabled),null!=e.contactNameDisabled&&(this.disabled.contactNameDisabled=e.contactNameDisabled),null!=e.address1Disabled&&(this.disabled.address1Disabled=e.address1Disabled),null!=e.address2Disabled&&(this.disabled.address2Disabled=e.address2Disabled),null!=e.address3Disabled&&(this.disabled.address3Disabled=e.address3Disabled),null!=e.cityDisabled&&(this.disabled.cityDisabled=e.cityDisabled),null!=e.stateDisabled&&(this.disabled.stateDisabled=e.stateDisabled),null!=e.postalDisabled&&(this.disabled.postalDisabled=e.postalDisabled),null!=e.emailDisabled&&(this.disabled.emailDisabled=e.emailDisabled),null!=e.phoneDisabled&&(this.disabled.phoneDisabled=e.phoneDisabled),null!=e.extensionDisabled&&(this.disabled.extensionDisabled=e.extensionDisabled),null!=e.updateEntryDisabled&&(this.disabled.updateEntryDisabled=e.updateEntryDisabled),null!=e.saveEntryDisabled&&(this.disabled.saveEntryDisabled=e.saveEntryDisabled),null!=e.nicknameDisabled&&(this.disabled.nicknameDisabled=e.nicknameDisabled),null!=e.locationIdDisabled&&(this.disabled.locationIdDisabled=e.locationIdDisabled),null!=e.faxDisabled&&(this.disabled.faxDisabled=e.faxDisabled),null!=e.phoneTypeDisabled&&(this.disabled.phoneTypeDisabled=e.phoneTypeDisabled),null!=e.useAsDefaultDisabled&&(this.disabled.useAsDefaultDisabled=e.useAsDefaultDisabled),null!=e.isResidentialDisabled&&(this.disabled.isResidentialDisabled=e.isResidentialDisabled),null!=e.emailNotifyDisabled&&(this.disabled.emailNotifyDisabled=e.emailNotifyDisabled)},t.prototype.initChange=function(e){null!=e.onContactListChange&&(this.change.onContactListChange=e.onContactListChange),null!=e.onCountryChange&&(this.change.onCountryChange=e.onCountryChange),null!=e.onNameChange&&(this.change.onNameChange=e.onNameChange),null!=e.onContactNameChange&&(this.change.onContactNameChange=e.onContactNameChange),null!=e.onAddress1Change&&(this.change.onAddress1Change=e.onAddress1Change),null!=e.onAddress2Change&&(this.change.onAddress2Change=e.onAddress2Change),null!=e.onAddress3Change&&(this.change.onAddress3Change=e.onAddress3Change),null!=e.onCityChange&&(this.change.onCityChange=e.onCityChange),null!=e.onStateChange&&(this.change.onStateChange=e.onStateChange),null!=e.onPostalChange&&(this.change.onPostalChange=e.onPostalChange),null!=e.onEmailChange&&(this.change.onEmailChange=e.onEmailChange),null!=e.onSelectSuggestedAddress&&(this.change.onSelectSuggestedAddress=e.onSelectSuggestedAddress),null!=e.onPhoneChange&&(this.change.onPhoneChange=e.onPhoneChange),null!=e.onExtensionChange&&(this.change.onExtensionChange=e.onExtensionChange),null!=e.onUpdateEntryChange&&(this.change.onUpdateEntryChange=e.onUpdateEntryChange),null!=e.onSaveEntryChange&&(this.change.onSaveEntryChange=e.onSaveEntryChange),null!=e.onNicknameChange&&(this.change.onNicknameChange=e.onNicknameChange),null!=e.onLocationIdChange&&(this.change.onLocationIdChange=e.onLocationIdChange),null!=e.onFaxChange&&(this.change.onFaxChange=e.onFaxChange),null!=e.onPhoneTypeChange&&(this.change.onPhoneTypeChange=e.onPhoneTypeChange),null!=e.onUseAsDefaultChange&&(this.change.onUseAsDefaultChange=e.onUseAsDefaultChange),null!=e.onIsResidentialChange&&(this.change.onIsResidentialChange=e.onIsResidentialChange),null!=e.onEmailNotifyChange&&(this.change.onEmailNotifyChange=e.onEmailNotifyChange)},t.prototype.initBlur=function(e){null!=e.onContactListBlur&&(this.blur.onContactListBlur=e.onContactListBlur),null!=e.onCountryBlur&&(this.blur.onCountryBlur=e.onCountryBlur),null!=e.onNameBlur&&(this.blur.onNameBlur=e.onNameBlur),null!=e.onContactNameBlur&&(this.blur.onContactNameBlur=e.onContactNameBlur),null!=e.onAddress1Blur&&(this.blur.onAddress1Blur=e.onAddress1Blur),null!=e.onAddress2Blur&&(this.blur.onAddress2Blur=e.onAddress2Blur),null!=e.onAddress3Blur&&(this.blur.onAddress3Blur=e.onAddress3Blur),null!=e.onCityBlur&&(this.blur.onCityBlur=e.onCityBlur),null!=e.onStateBlur&&(this.blur.onStateBlur=e.onStateBlur),null!=e.onPostalBlur&&(this.blur.onPostalBlur=e.onPostalBlur),null!=e.onEmailBlur&&(this.blur.onEmailBlur=e.onEmailBlur),null!=e.onPhoneBlur&&(this.blur.onPhoneBlur=e.onPhoneBlur),null!=e.onExtensionBlur&&(this.blur.onExtensionBlur=e.onExtensionBlur),null!=e.onUpdateEntryBlur&&(this.blur.onUpdateEntryBlur=e.onUpdateEntryBlur),null!=e.onSaveEntryBlur&&(this.blur.onSaveEntryBlur=e.onSaveEntryBlur),null!=e.onNicknameBlur&&(this.blur.onNicknameBlur=e.onNicknameBlur),null!=e.onLocationIdBlur&&(this.blur.onLocationIdBlur=e.onLocationIdBlur),null!=e.onFaxBlur&&(this.blur.onFaxBlur=e.onFaxBlur),null!=e.onPhoneTypeBlur&&(this.blur.onPhoneTypeBlur=e.onPhoneTypeBlur),null!=e.onUseAsDefaultBlur&&(this.blur.onUseAsDefaultBlur=e.onUseAsDefaultBlur),null!=e.onIsResidentialBlur&&(this.blur.onIsResidentialBlur=e.onIsResidentialBlur),null!=e.onEmailNotifyBlur&&(this.blur.onEmailNotifyBlur=e.onEmailNotifyBlur)},t.prototype.initRequired=function(e){null!=e.contactListRequired&&(this.required.contactListRequired=e.contactListRequired),null!=e.countryRequired&&(this.required.countryRequired=e.countryRequired),null!=e.nameRequired&&(this.required.nameRequired=e.nameRequired),null!=e.contactNameRequired&&(this.required.contactNameRequired=e.contactNameRequired),null!=e.address1Required&&(this.required.address1Required=e.address1Required),null!=e.address2Required&&(this.required.address2Required=e.address2Required),null!=e.address3Required&&(this.required.address3Required=e.address3Required),null!=e.cityRequired&&(this.required.cityRequired=e.cityRequired),null!=e.stateRequired&&(this.required.stateRequired=e.stateRequired),null!=e.postalRequired&&(this.required.postalRequired=e.postalRequired),null!=e.emailRequired&&(this.required.emailRequired=e.emailRequired),null!=e.phoneRequired&&(this.required.phoneRequired=e.phoneRequired),null!=e.extensionRequired&&(this.required.extensionRequired=e.extensionRequired),null!=e.nicknameRequired&&(this.required.nicknameRequired=e.nicknameRequired),null!=e.locationIdRequired&&(this.required.locationIdRequired=e.locationIdRequired),null!=e.faxRequired&&(this.required.faxRequired=e.faxRequired),null!=e.phoneTypeRequired&&(this.required.phoneTypeRequired=e.phoneTypeRequired)},t.prototype.initPattern=function(e){null!=e.namePattern&&(this.pattern.namePattern=e.namePattern),null!=e.contactNamePattern&&(this.pattern.contactNamePattern=e.contactNamePattern),null!=e.address1Pattern&&(this.pattern.address1Pattern=e.address1Pattern),null!=e.address2Pattern&&(this.pattern.address2Pattern=e.address2Pattern),null!=e.address3Pattern&&(this.pattern.address3Pattern=e.address3Pattern),null!=e.cityPattern&&(this.pattern.cityPattern=e.cityPattern),null!=e.statePattern&&(this.pattern.statePattern=e.statePattern),null!=e.postalPattern&&(this.pattern.postalPattern=e.postalPattern),null!=e.emailPattern&&(this.pattern.emailPattern=e.emailPattern),null!=e.phonePattern&&(this.pattern.phonePattern=e.phonePattern),null!=e.extensionPattern&&(this.pattern.extensionPattern=e.extensionPattern),null!=e.nicknamePattern&&(this.pattern.nicknamePattern=e.nicknamePattern),null!=e.locationIdPattern&&(this.pattern.locationIdPattern=e.locationIdPattern),null!=e.faxPattern&&(this.pattern.faxPattern=e.faxPattern)},t.prototype.initMaxLength=function(e){null!=e.nameMaxLength&&(this.maxLength.nameMaxLength=e.nameMaxLength),null!=e.contactNameMaxLength&&(this.maxLength.contactNameMaxLength=e.contactNameMaxLength),null!=e.address1MaxLength&&(this.maxLength.address1MaxLength=e.address1MaxLength),null!=e.address2MaxLength&&(this.maxLength.address2MaxLength=e.address2MaxLength),null!=e.address3MaxLength&&(this.maxLength.address3MaxLength=e.address3MaxLength),null!=e.cityMaxLength&&(this.maxLength.cityMaxLength=e.cityMaxLength),null!=e.stateMaxLength&&(this.maxLength.stateMaxLength=e.stateMaxLength),null!=e.postalMaxLength&&(this.maxLength.postalMaxLength=e.postalMaxLength),null!=e.emailMaxLength&&(this.maxLength.emailMaxLength=e.emailMaxLength),null!=e.phoneMaxLength&&(this.maxLength.phoneMaxLength=e.phoneMaxLength),null!=e.extensionMaxLength&&(this.maxLength.extensionMaxLength=e.extensionMaxLength),null!=e.nicknameMaxLength&&(this.maxLength.nicknameMaxLength=e.nicknameMaxLength),null!=e.locationIdMaxLength&&(this.maxLength.locationIdMaxLength=e.locationIdMaxLength),null!=e.faxMaxLength&&(this.maxLength.faxMaxLength=e.faxMaxLength)},t.prototype.updateDisplayText=function(t){var s=new e.DisplayText;return s.addressGroup=t.AddressGroup,s.address1PlaceHolder=t.Address,s.address2PlaceHolder=t.AddressLine2Desc,s.address3PlaceHolder=t.Addressline3Desc,s.city=t.City,s.contactList=t.Addressbook,s.contactName=t.ContactName,s.country=t.Country,s.email=t.Email,s.extension=t.Extension,s.name=t.Name,s.phone=t.Phone,s.postal=t.PostalCode,s.state=t.State,s.selectOne=t.SelectOne,s},t.prototype.getCityStatePostalOrder=function(e){var t=new Array;if(e){var s=JSON.parse(e);s&&3===s.length?t.push(s[0].name,s[1].name,s[2].name):null!=s&&2===s.length?t.push(s[0].name,s[1].name):t.push("City","State","Postal")}else t.push("City","State","Postal");var a=t.indexOf("Postal");return this.postalFirstCountries.indexOf(this.address.country.key)!==-1&&a>0&&(t.splice(a,1),t.unshift("Postal")),t},t.prototype.onContactListChange=function(){var e=this;this.clearSuggestedAddresses(),this.addressBookDetails.keyValue?(this.addressBookDetails.saveAddress=!1,this.onSaveEntryChange(),this.populateContact().then(function(){e.change.onContactListChange()})):(this.clearForm(),this.change.onContactListChange())},t.prototype.onCountryChange=function(e){var t=this;return void 0===e&&(e=!1),this.updateCountrySpecificData(e).then(function(){return t.change.onCountryChange()})},t.prototype.onCityTypeaheadSelect=function(e){return this.address.city=e.substring(0,this.maxLength.cityMaxLength()),this.change.onCityChange()},t.prototype.onPostalChange=function(){var e=this;this.$timeout.cancel(this.onPostalChangeTimer),this.onPostalChangeTimer=this.$timeout(function(t){e.updateCityState().then(function(){e.change.onPostalChange()})},1e3)},t.prototype.onSaveEntryChange=function(){if(this.addressBookDetails.saveAddress)this.addressBookDetails.updateAddress=!1;else{this.addressBookDetails.newNickName=null;var e=this.getContactFromListIndex();if(e!==-1){var t=this.contacts[e];this.addressBookDetails.keyValue.value=t.value}this.change.onNicknameChange()}this.change.onSaveEntryChange()},t.prototype.getContactFromListIndex=function(){return this.addressBookDetails.keyValue&&this.addressBookDetails.keyValue.key?this.contacts.map(function(e){return e.key}).indexOf(this.addressBookDetails.keyValue.key):-1},t.prototype.onUpdateEntryChange=function(){this.addressBookDetails.updateAddress&&(this.addressBookDetails.saveAddress=!1,this.onSaveEntryChange()),this.change.onUpdateEntryChange()},t.prototype.onIsResidentialChange=function(){this.isResidential?this.address.classification={key:"2",value:"Residential"}:this.address.classification=new e.KeyValue,this.change.onIsResidentialChange()},t.prototype.populateContact=function(){var t=this,s=function(s){t.address.classification=new e.KeyValue,t.address.address1=s.addLine1,t.address.address2=s.addLine2,t.address.address3=s.addLine3,t.address.city=s.city,"IE"==s.country&&null!=t.states&&null!=t.states[t.states.map(function(e){return e.key.substring(0,5)}).indexOf(s.state)]?t.address.state=t.states[t.states.map(function(e){return e.key.substring(0,5)}).indexOf(s.state)]:null!=t.states&&null!=t.states[t.states.map(function(e){return e.key}).indexOf(s.state)]?t.address.state=t.states[t.states.map(function(e){return e.key}).indexOf(s.state)]:t.address.state={key:s.state,value:null},t.address.postal=s.postalCode,t.contact.phone=s.phone,t.contact.name=s.name,t.contact.contactName=s.contactName,t.contact.email=s.email,t.contact.extension=s.extension;var a=t.isResidential;t.isResidential=!!s.residential,t.isResidential!==a&&t.onIsResidentialChange()},a=this.$q.defer();return this.http.getContact(this.locale,this.userID,this.addressBookDetails.keyValue.key).then(function(e){if(null!=e.data&&null!=e.data.AddressInfo){var n=JSON.parse(e.data.AddressInfo),i=t.address.country.key;null!=t.countries[t.countries.map(function(e){return e.key}).indexOf(n.country)]&&(t.address.country=t.countries[t.countries.map(function(e){return e.key}).indexOf(n.country)]),i!==t.address.country.key?(t.address.state=null,t.onCountryChange().then(function(){s(n),a.resolve("")})):(s(n),a.resolve(""))}else a.resolve("")},function(e){a.resolve("")}),a.promise},t.prototype.updateState=function(t){null!=this.states&&null!=this.states[this.states.map(function(e){return e.key}).indexOf(t)]?this.address.state=this.states[this.states.map(function(e){return e.key}).indexOf(t)]:(this.address.state=new e.State,this.address.state.key=t)},t.prototype.getUpdatedCityStatePostalDisplayText=function(e){var t=JSON.parse(e),s=angular.copy(this.displayText);return s.city=t.City,s.postal=t.PostalCode,s.state=t.State,s},t.prototype.validateAddress=function(){var t=this,s=this.$q.defer();if(this.clearSuggestedAddresses(),this.formValid())this.$timeout(function(){s.resolve({validationResult:{key:"2",value:"validAddress"},errors:null})},5e3),"US"===this.address.country.key||"PR"===this.address.country.key?(this.address.classification=new e.KeyValue,this.isResidential=!1,this.http.validateRegional(this.address).then(function(e){var a=JSON.parse(e.data.validationResponse);"2"===a.key?t.http.validateAddress(t.address,t.contact.name).then(function(e){var a=JSON.parse(e.data.validationResponse);if("2"===a.key){if(null!=e.data.addressList&&""!=e.data.addressList){var n=JSON.parse(e.data.addressList);0!==n.length&&(t.updateAddress(n[0]),t.clearSuggestedAddresses())}s.resolve({validationResult:a,errors:null})}else"1"===a.key?(t.streetLevelSuggestions&&(t.suggestedAddresses=t.getSuggestedAddresses(JSON.parse(e.data.addressList))),s.resolve({validationResult:a,errors:null})):"0"===a.key?s.resolve({validationResult:a,errors:null}):s.resolve({validationResult:{key:"2",value:"validAddress"},errors:null})},function(e){s.resolve({validationResult:{key:"2",value:"validAddress"},errors:null})}):"1"===a.key?(t.suggestedAddresses=t.getSuggestedAddresses(JSON.parse(e.data.addressList)),s.resolve({validationResult:a,errors:null})):"0"===a.key?s.resolve({validationResult:a,errors:null}):"3"===a.key?s.resolve({validationResult:a,errors:null}):s.resolve({validationResult:{key:"2",value:"validAddress"},errors:null})},function(e){s.resolve({validationResult:{key:"2",value:"validAddress"},errors:null})})):this.validateIntl?this.http.validateRegional(this.address).then(function(e){var a=JSON.parse(e.data.validationResponse);"2"===a.key?t.http.getClassification(t.address).then(function(e){null!=e.data&&""!=e.data&&""!=e.data.classificationCode&&""!=e.data.classificationDescription&&(t.address.classification={key:e.data.classificationCode,value:e.data.classificationDescription}),"2"===t.address.classification.key&&(t.isResidential=!0),s.resolve({validationResult:a,errors:null})},function(e){s.resolve({validationResult:a,errors:null})}):"1"===a.key?(t.suggestedAddresses=t.getSuggestedAddresses(JSON.parse(e.data.addressList)),s.resolve({validationResult:a,errors:null})):"0"===a.key?s.resolve({validationResult:a,errors:null}):"3"===a.key?s.resolve({validationResult:a,errors:null}):s.resolve({validationResult:{key:"2",value:"validAddress"},errors:null})},function(e){s.resolve({validationResult:{key:"2",value:"validAddress"},errors:null})}):this.http.getClassification(this.address).then(function(e){null!=e.data&&""!=e.data&&""!=e.data.classificationCode&&""!=e.data.classificationDescription&&(t.address.classification={key:e.data.classificationCode,value:e.data.classificationDescription}),"2"===t.address.classification.key&&(t.isResidential=!0),s.resolve({validationResult:{key:"2",value:"validAddress"},errors:null})},function(e){s.resolve({validationResult:{key:"2",value:"validAddress"},errors:null})});else{var a=this.getFormErrors();s.resolve({validationResult:{key:"0",value:"invalidAddress"},errors:a})}return s.promise},t.prototype.getFormErrors=function(){var t=this.$scope.cacForm.$error;if(null!=t){var s=[];for(var a in t)if(t.hasOwnProperty(a)&&Array.isArray(t[a]))for(var n=0;n<t[a].length;n++){var i=(null!=this.idPrefix?this.idPrefix:"")+t[a][n].$name,o=angular.element("label[for="+i+"]")[0],l=t[a][n].$name,d=a;s.push(new e.FormError(i,(null!=this.idPrefix?this.idPrefix+" ":"")+o.innerText,a,l,d))}return s}return null},t.prototype.isFormValid=function(){return this.$scope.cacForm.$valid},t.prototype.formValid=function(){return this.validate=!0,this.$scope.cacForm.$valid},t.prototype.getSuggestedAddressList=function(){return null!=this.suggestedAddresses?this.suggestedAddresses:new Array},t.prototype.getSuggestedAddresses=function(t){if(null!=t&&0!=t.length){for(var s=new Array,a=0,n=t;a<n.length;a++){var i=n[a],o=new e.Address;o.address1=i.addLine1,o.address2=i.addLine2,o.address3=i.addLine3,o.city=i.city,o.postal=i.postalCode,o.town=i.town,o.classification={key:i.classificationCode,value:i.classificationDescription},null!=this.states&&null!=this.states[this.states.map(function(e){return e.key}).indexOf(i.state)]?o.state=this.states[this.states.map(function(e){return e.key}).indexOf(i.state)]:o.state={key:i.state,value:null},s.push(o)}return s}return null},t.prototype.populateSuggestedAddress=function(){null!=this.suggestedAddress&&(this.suggestedAddress.address1&&(this.address.address1=this.suggestedAddress.address1),this.suggestedAddress.address2?this.address.address2=this.suggestedAddress.address2:"US"!==this.address.country.key&&"PR"!==this.address.country.key||!this.suggestedAddress.address1||(this.address.address2=null),this.suggestedAddress.address3?this.address.address3=this.suggestedAddress.address2:"US"!==this.address.country.key&&"PR"!==this.address.country.key||!this.suggestedAddress.address1||(this.address.address3=null),this.address.city=null!=this.suggestedAddress.city&&""!=this.suggestedAddress.city?this.suggestedAddress.city:null,this.address.state=null!=this.suggestedAddress.state?this.suggestedAddress.state:null,this.address.postal=null!=this.suggestedAddress.postal&&""!=this.suggestedAddress.postal?this.suggestedAddress.postal:null,this.address.classification=null!=this.suggestedAddress.classification&&null!=this.suggestedAddress.classification.key&&""!=this.suggestedAddress.classification.key?this.suggestedAddress.classification:null,null!=this.address.classification&&"2"===this.suggestedAddress.classification.key&&(this.isResidential=!0),this.clearSuggestedAddresses(),this.change.onSelectSuggestedAddress())},t.prototype.getData=function(){var t=angular.copy(this.addressBookDetails);return t.keyValue||(t.keyValue=new e.KeyValue),t.newNickName&&t.saveAddress&&(t.keyValue.value=t.newNickName),{address:this.address,contact:this.contact,addressBookDetails:t,emailNotify:this.emailNotify}},t.prototype.destroy=function(){this.$scope.$destroy()},t.prototype.registerSetters=function(){var e=this;this.apiObject.setData=function(t){var s=e.address.country;e.address=angular.copy(t.address),e.contact=angular.copy(t.contact),e.addressBookDetails=angular.copy(t.addressBookDetails),e.emailNotify=t.emailNotify,"2"===t.address.classification.key&&(e.isResidential=!0),e.address.country.key!=s.key?e.onCountryChange(!0).then(function(){t.address.state&&t.address.state.key&&e.updateState(t.address.state.key)}):t.address.state&&t.address.state.key&&e.updateState(t.address.state.key)},this.apiObject.setContacts=function(t){e.contacts=t},this.apiObject.setAddress=function(t){var s=e.address.country;e.address=angular.copy(t),"2"===t.classification.key&&(e.isResidential=!0),e.address.country.key!=s.key?e.onCountryChange(!0).then(function(){t.state&&t.state.key&&e.updateState(t.state.key)}):t.state&&t.state.key&&e.updateState(t.state.key)},this.apiObject.setCountry=function(t){var s=angular.copy(e.address.country);e.address.country=t,e.address.country.key!=s.key&&e.onCountryChange(!0)},this.apiObject.setPostal=function(t){e.address.postal=t},this.apiObject.setState=function(t){e.updateState(t.key)},this.apiObject.setCity=function(t){e.address.city=t},this.apiObject.setAddress1=function(t){e.address.address1=t},this.apiObject.setAddress2=function(t){e.address.address2=t},this.apiObject.setAddress3=function(t){e.address.address3=t},this.apiObject.setContact=function(t){e.contact=t},this.apiObject.setName=function(t){e.contact.name=t},this.apiObject.setContactName=function(t){e.contact.contactName=t},this.apiObject.setEmail=function(t){e.contact.email=t},this.apiObject.setPhone=function(t){e.contact.phone=t},this.apiObject.setExtension=function(t){e.contact.extension=t},this.apiObject.setLocationId=function(t){e.contact.locationId=t},this.apiObject.setFax=function(t){e.contact.fax=t},this.apiObject.setEmailNotify=function(t){var s=e.emailNotify;e.emailNotify=t,s!=t&&e.change.onEmailNotifyChange()},this.apiObject.setPhoneType=function(t){e.contact.phoneType=t},this.apiObject.setAddressBookDetails=function(t){t.keyValue&&!t.keyValue.key&&(t.keyValue=null),e.addressBookDetails=t},this.apiObject.setAddressBookKeyValue=function(t){t&&!t.key?e.addressBookDetails.keyValue=null:e.addressBookDetails.keyValue=t},this.apiObject.setUpdateAddressEntry=function(t){e.addressBookDetails.updateAddress=t},this.apiObject.setDefaultAddress=function(t){e.addressBookDetails.updateDefaultAddress=t},this.apiObject.setSaveAddressEntry=function(t){e.addressBookDetails.saveAddress=t}},t.prototype.getCountries=function(e,t){var s=new Array;return s=null!=e.countries?angular.copy(e.countries):JSON.parse(t)},t.prototype.getCities=function(e){return this.http.getCities(e,this.locale,this.address.country.key).then(function(e){if(null!=e.data&&""!=e.data&&"null"!=e.data){var t=JSON.parse(e.data);return t&&t.length>8&&(t=t.splice(0,8)),t}return new Array})},t.prototype.updateCityState=function(){var e=this,t=this.$q.defer();return("US"===this.address.country.key||"PR"===this.address.country.key)&&null!=this.address.postal&&this.address.postal.length>=5?this.http.getUpdatedCityState(this.address.country.key,this.address.postal).then(function(s){if(""!==s.data.addressList&&null!=s.data.addressList){var a=JSON.parse(s.data.addressList);0!=a.length&&(e.address.city=a[0].city,e.address.postal=a[0].postalCode,null!=e.states&&(e.address.state=e.states[e.states.map(function(e){return e.key}).indexOf(a[0].state)]))}t.resolve("")}):t.resolve(""),t.promise},t.prototype.updateCountrySpecificData=function(e){var t=this;return void 0===e&&(e=!1),this.http.getCountrySpecificData(this.locale,this.address.country.key).then(function(s){t.displayText=t.getUpdatedCityStatePostalDisplayText(s.data.addressLabel);var a=JSON.parse(s.data.addressLayout);if(t.cityStatePostalOrder=t.getCityStatePostalOrder(a.layoutComponent),t.required.setCityStatePostalRequiredFlags({city:a.cityRequired,state:a.stateRequired,postal:a.postalCodeRequired}),t.show.setCityStatePostalShowFlags({city:a.cityVisible,state:a.stateVisible,postal:a.postalCodeVisible}),null!=t.states&&(t.address.state=null),null!=s.data.stateList&&""!=s.data.stateList){var n=JSON.parse(s.data.stateList);t.states=n,null==t.address.state||null!=t.address.state.key&&e?null!=t.address.state&&null!=t.states[t.states.map(function(e){return e.key}).indexOf(t.address.state.key)]&&(t.address.state=t.states[t.states.map(function(e){return e.key}).indexOf(t.address.state.key)]):t.address.state=null}else t.states=null},function(e){})},t.prototype.setInternalServices=function(){this.show.showSaveEntry=this.showSaveEntry,this.show.showUpdateEntry=this.showUpdateEntry,this.show.showUseAsDefault=this.showUseAsDefault,this.show.showNickname=this.showNickname},t.prototype.clearForm=function(){var t=this.address.country,s=this.addressBookDetails.updateDefaultAddress;this.address=new e.Address,this.address.state=null,this.contact=new e.Contact,this.addressBookDetails=new e.AddressBookDetails,
this.addressBookDetails.updateDefaultAddress=s,this.address.country=t},t.prototype.updateAddress=function(e){this.address.city=e.city,this.address.postal=e.postalCode,null!=this.states&&null!=this.states[this.states.map(function(e){return e.key}).indexOf(e.state)]?this.address.state=this.states[this.states.map(function(e){return e.key}).indexOf(e.state)]:this.address.state={key:e.state,value:null},this.address.classification={key:e.classificationCode,value:e.classificationDescription},"2"===this.address.classification.key&&(this.isResidential=!0)},t.prototype.clearSuggestedAddresses=function(){this.suggestedAddress=null,this.suggestedAddresses=null},t.prototype.getForm=function(){return this.$scope.cacForm},t.$inject=["$scope","CacHttp","$q","$timeout"],t}();e.CacCtrl=t}(Cac||(Cac={}));
var Cac;!function(c){var t=function(){function t(t){var a=this;this.$compile=t,this.restrict="E",this.controllerAs="cac",this.controller=c.CacCtrl,this.bindToController=!0,this.scope={loadedCallback:"="},this.link=function(c,t){c.cac.loadTemplate=function(n){t.html(n),a.$compile(t.contents())(c)},c.cac.loadedCallback&&c.cac.loadedCallback(c.cac.apiObject)}}return t.factory=function(){var c=function(c){return new t(c)};return c.$inject=["$compile"],c},t}();c.CacDirective=t}(Cac||(Cac={}));
var Cac;!function(e){angular.module("upsCacModule",["ngMessages","ngAria"]).controller(e).directive("upsCac",e.CacDirective.factory()).directive("cacPostalLength",e.Directives.PostalLengthDirective.factory()).service("CacUtility",e.Services.Utility).service("CacHttp",e.Services.Http)}(Cac||(Cac={}));